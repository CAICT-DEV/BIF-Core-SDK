/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * © COPYRIGHT 2021 Corporation CAICT All rights reserved.
 * http://www.caict.ac.cn
 */
package cn.bif.sdkSamples.sdk.example;

import cn.bif.api.BIFSDK;
import cn.bif.common.*;
import cn.bif.model.crypto.KeyPairEntity;
import cn.bif.model.request.*;
import cn.bif.model.request.operation.BIFBaseOperation;
import cn.bif.model.request.operation.BIFContractInvokeOperation;
import cn.bif.model.request.operation.BIFGasSendOperation;
import cn.bif.model.response.*;
import cn.bif.model.response.result.BIFTransactionEvaluateFeeResult;
import cn.bif.model.response.result.BIFTransactionGasSendResult;
import cn.bif.module.encryption.key.PrivateKeyManager;
import cn.bif.utils.hex.HexFormat;
import org.junit.jupiter.api.Test;

import java.util.ArrayList;
import java.util.List;

public class TransactionDemo {
    BIFSDK sdk = BIFSDK.getInstance(SampleConstant.SDK_INSTANCE_URL);
    /**
     * getTransactionInfo
     */
    @Test
    public void getTransactionInfo() {
        BIFTransactionGetInfoRequest request = new BIFTransactionGetInfoRequest();
        request.setHash("d098413c2882ae8cf95e384d778635909effaeb3616ce03d741726b5bc0af00a");
        request.setDomainId(20);

        BIFTransactionGetInfoResponse response = sdk.getBIFTransactionService().getTransactionInfo(request);
        if (response.getErrorCode() == 0) {
            System.out.println(JsonUtils.toJSONString(response.getResult()));
        } else {
            System.out.println(JsonUtils.toJSONString(response));
        }
    }


    /**
     * gasSend
     */
    @Test
    public void gasSend() {
        // 初始化参数
        String senderAddress = "did:bid:efxASt17p1BeXVZ5vdTW9JkEQjy4vRMG";
        String senderPrivateKey = "priSPKhp98C4bvZkTZpFGF2C3zCFVD3zqKMo7Lc3xoH49Yj47u";
        String destAddress = "did:bid:efqhQu9YWEWpUKQYkAyGevPGtAdD1N6p";
        Long amount = ToBaseUnit.ToUGas("300000");

        BIFTransactionGasSendRequest request = new BIFTransactionGasSendRequest();
        request.setSenderAddress(senderAddress);
        request.setPrivateKey(senderPrivateKey);
        request.setDestAddress(destAddress);
        request.setAmount(amount);
        request.setRemarks("gas send");
       // request.setDomainId(20);
        request.setFeeLimit(125900L);
       // request.setCeilLedgerSeq(1L);
        // 调用 gasSend 接口
        BIFTransactionGasSendResponse response = sdk.getBIFTransactionService().gasSend(request);
        if (response.getErrorCode() == 0) {
            System.out.println(JsonUtils.toJSONString(response.getResult()));
        } else {
            System.out.println(JsonUtils.toJSONString(response));
        }
    }


    /**
     * evaluateFee
     */
    @Test
    public void evaluateFee() {
        // 初始化变量
        String senderAddresss = "did:bid:efHzcjj3w1eg9B4aoaem5axrBLS8y8JF";
        String destAddress = "did:bid:ef14uPsX7XYLzsU4t2rnRrsK2zfUbW3r";
        Long bifAmount = ToBaseUnit.ToUGas("10.9");

        // 构建sendGas操作
        BIFGasSendOperation gasSendOperation = new BIFGasSendOperation();
        gasSendOperation.setSourceAddress(senderAddresss);
        gasSendOperation.setDestAddress(destAddress);
        gasSendOperation.setAmount(bifAmount);

        // 初始化评估交易请求参数
        BIFTransactionEvaluateFeeRequest request = new BIFTransactionEvaluateFeeRequest();
        request.setOperation(gasSendOperation);
        request.setSourceAddress(senderAddresss);
        request.setSignatureNumber(1);
        request.setRemarks(HexFormat.byteToHex("evaluate fees".getBytes()));
        request.setDomainId(20);
        request.setGasPrice(1L);

       // 调用evaluateFee接口
        BIFTransactionEvaluateFeeResponse response = sdk.getBIFTransactionService().evaluateFee(request);
        if (response.getErrorCode() == 0) {
            BIFTransactionEvaluateFeeResult result = response.getResult();
            System.out.println(JsonUtils.toJSONString(result));
        } else {
            System.out.println(JsonUtils.toJSONString(response));
        }
    }

    /**
     * batchEvaluateFee
     */
    @Test
    public void batchEvaluateFee() {
        // 初始化参数
        String senderAddress = "did:bid:efHzcjj3w1eg9B4aoaem5axrBLS8y8JF";
        String destAddress1 = KeyPairEntity.getBidAndKeyPairBySM2().getEncAddress();
        String destAddress2 = KeyPairEntity.getBidAndKeyPairBySM2().getEncAddress();
        Long bifAmount = ToBaseUnit.ToUGas("10.9");
        String input1 = "{\"method\":\"creation\",\"params\":{\"document\":{\"@context\": [\"https://w3.org/ns/did/v1\"],\"context\": \"https://w3id.org/did/v1\"," +
                "\"id\": \""+destAddress1+"\", \"version\": \"1\"}}}";
        String input2 = "{\"method\":\"creation\",\"params\":{\"document\":{\"@context\": [\"https://w3.org/ns/did/v1\"],\"context\": \"https://w3id.org/did/v1\"," +
                "\"id\": \""+destAddress2+"\", \"version\": \"1\"}}}";

        List<BIFBaseOperation> operations = new ArrayList<BIFBaseOperation>();
        // 构建操作1
        BIFContractInvokeOperation bIFContractInvokeOperation1 = new BIFContractInvokeOperation();
        bIFContractInvokeOperation1.setContractAddress(destAddress1);
        bIFContractInvokeOperation1.setBIFAmount(bifAmount);
        bIFContractInvokeOperation1.setInput(input1);
        // 构建操作2
        BIFContractInvokeOperation bIFContractInvokeOperation2 = new BIFContractInvokeOperation();
        bIFContractInvokeOperation2.setContractAddress(destAddress2);
        bIFContractInvokeOperation2.setBIFAmount(bifAmount);
        bIFContractInvokeOperation2.setInput(input2);

        operations.add(bIFContractInvokeOperation1);
        operations.add(bIFContractInvokeOperation2);

        // 初始化评估交易请求参数
        BIFTransactionEvaluateFeeRequest request = new BIFTransactionEvaluateFeeRequest();
        request.setOperations(operations);
        request.setSourceAddress(senderAddress);
        request.setSignatureNumber(1);
        request.setRemarks(HexFormat.byteToHex("batch evaluate fees".getBytes()));
        request.setDomainId(0);
        request.setGasPrice(1L);
        request.setFeeLimit(500L);

        // 调用batchEvaluateFee接口
        BIFTransactionEvaluateFeeResponse response = sdk.getBIFTransactionService().batchEvaluateFee(request);
        if (response.getErrorCode() == 0) {
            BIFTransactionEvaluateFeeResult result = response.getResult();
            System.out.println(JsonUtils.toJSONString(result));
        } else {
            System.out.println(JsonUtils.toJSONString(response));
        }
    }

    /**
     * bifSubmit
     */
    @Test
    public void bifSubmit() {
        // 初始化参数
        String senderPrivateKey = "priSPKkWVk418PKAS66q4bsiE2c4dKuSSafZvNWyGGp2sJVtXL";
        //序列化交易
        String serialization ="";
        //签名
        byte[] signBytes = PrivateKeyManager.sign(HexFormat.hexToByte(serialization), senderPrivateKey);
        String publicKey = PrivateKeyManager.getEncPublicKey(senderPrivateKey);
        //提交交易
        BIFTransactionSubmitRequest submitRequest = new BIFTransactionSubmitRequest();
        submitRequest.setSerialization(serialization);
        submitRequest.addSignature(publicKey,HexFormat.byteToHex(signBytes));
        //submitRequest.setPublicKey(publicKey);
        //submitRequest.setSignData(HexFormat.byteToHex(signBytes));
        // 调用bifSubmit接口
        BIFTransactionSubmitResponse response = sdk.getBIFTransactionService().BIFSubmit(submitRequest);
        if (response.getErrorCode() == 0) {
            System.out.println(JsonUtils.toJSONString(response.getResult()));
        } else {
            System.out.println("error: " + response.getErrorDesc());
        }
    }
    /**
     * getTxCacheSize
     */
    @Test
    public void getTxCacheSize() {
        BIFTransactionGetTxCacheSizeResponse response = sdk.getBIFTransactionService().getTxCacheSize(1);
        if (response.getErrorCode() == 0) {
            System.out.println("txCacheSize: "+JsonUtils.toJSONString(response.getQueueSize()));
        } else {
            System.out.println(JsonUtils.toJSONString(response));
        }
    }

    @Test
    public void getTxCacheData() {
        BIFTransactionCacheRequest cacheRequest=new BIFTransactionCacheRequest();
        cacheRequest.setDomainId(0);
        //cacheRequest.setHash("");

        BIFTransactionCacheResponse response = sdk.getBIFTransactionService().getTxCacheData(null);
        if (response.getErrorCode() == 0) {
            System.out.println("txCacheData: "+JsonUtils.toJSONString(response.getResult().getTransactions()));
        } else {
            System.out.println(JsonUtils.toJSONString(response));
        }
    }
    @Test
    public void Offline_ParseBlob() {
        String transactionBlobResult = "0a286469643a6269643a65666e5655677151466659657539374142663673476d335746745658485a4232100d22a833080122a33312ef32080112ea3236303830363034303532363030303630303235353334383031353631303031353537363030303830666435623530363130633930383036313030323536303030333936303030663330303630383036303430353236303034333631303631303063353537363030303335376330313030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030393030343633666666666666666631363830363330366266653931333134363130306361353738303633323930383162366631343631303065313537383036333561313131343537313436313031353435373830363336646232363932313134363130313865353738303633373964663432333131343631303233343537383036333831346438303333313436313032636235373830363338353332353563633134363130326532353738303633386630303462633231343631303330643537383036336133633165636363313436313033323435373830363361636532333332613134363130333638353738303633626235663631346531343631303337663537383036336330386561366239313436313033646135373830363364653036623536363134363130343162353735623630303038306664356233343830313536313030643635373630303038306664356235303631303064663631303438343536356230303562333438303135363130306564353736303030383066643562353036313031353236303034383033363033383130313930383038303335393036303230303139303832303138303335393036303230303139303830383036303166303136303230383039313034303236303230303136303430353139303831303136303430353238303933393239313930383138313532363032303031383338333830383238343337383230313931353035303530353035303530393139323931393239303830333539303630323030313930393239313930353035303530363130353536353635623030356236313031386336303034383033363033383130313930383038303335373766666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666631363930363032303031393039323931393035303530353036313036316335363562303035623334383031353631303139613537363030303830666435623530363130316239363030343830333630333831303139303830383033353930363032303031393039323931393035303530353036313036366135363562363034303531383038303630323030313832383130333832353238333831383135313831353236303230303139313530383035313930363032303031393038303833383336303030356238333831313031353631303166393537383038323031353138313834303135323630323038313031393035303631303164653536356235303530353035303930353039303831303139303630316631363830313536313032323635373830383230333830353136303031383336303230303336313031303030613033313931363831353236303230303139313530356235303932353035303530363034303531383039313033393066333562333438303135363130323430353736303030383066643562353036313032343936313037316635363562363034303531383038303630323030313833383135323630323030313832383130333832353238343831383135313831353236303230303139313530383035313930363032303031393038303833383336303030356238333831313031353631303238663537383038323031353138313834303135323630323038313031393035303631303237343536356235303530353035303930353039303831303139303630316631363830313536313032626335373830383230333830353136303031383336303230303336313031303030613033313931363831353236303230303139313530356235303933353035303530353036303430353138303931303339306633356233343830313536313032643735373630303038306664356235303631303265303631303763633536356230303562333438303135363130326565353736303030383066643562353036313032663736313037663935363562363034303531383038323831353236303230303139313530353036303430353138303931303339306633356233343830313536313033313935373630303038306664356235303631303332323631303766663536356230303562363130333636363030343830333630333831303139303830383033353737666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666313639303630323030313930393239313930383033353930363032303031393039323931393035303530353036313038343135363562303035623334383031353631303337343537363030303830666435623530363130333764363130383930353635623030356233343830313536313033386235373630303038306664356235303631303363343630303438303336303338313031393038303830333537376666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666663136393036303230303139303932393139303530353035303631306163613536356236303430353138303832383135323630323030313931353035303630343035313830393130333930663335623334383031353631303365363537363030303830666435623530363130343035363030343830333630333831303139303830383033353930363032303031393039323931393035303530353036313062316135363562363034303531383038323831353236303230303139313530353036303430353138303931303339306633356233343830313536313034323735373630303038306664356235303631303438323630303438303336303338313031393038303830333539303630323030313930383230313830333539303630323030313930383038303630316630313630323038303931303430323630323030313630343035313930383130313630343035323830393339323931393038313831353236303230303138333833383038323834333738323031393135303530353035303530353039313932393139323930353035303530363130623264353635623030356233303737666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666313633313630303838313930353535303435363030393831393035353530343336303061383139303535353034323630306238313930353535303333363030633630303036313031303030613831353438313737666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666303231393136393038333737666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666313630323137393035353530336136303064383139303535353033323630306536303030363130313030306138313534383137376666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666663032313931363930383337376666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666663136303231373930353535303536356238313630303639303830353139303630323030313930363130353663393239313930363130626266353635623530383036303037383139303535353037666433336361303039343964636339663730343036353539383132626561633735643661663739313662653130613231613433356537636366386164393637626538323832363034303531383038303630323030313833383135323630323030313832383130333832353238343831383135313831353236303230303139313530383035313930363032303031393038303833383336303030356238333831313031353631303564643537383038323031353138313834303135323630323038313031393035303631303563323536356235303530353035303930353039303831303139303630316631363830313536313036306135373830383230333830353136303031383336303230303336313031303030613033313931363831353236303230303139313530356235303933353035303530353036303430353138303931303339306131353035303536356238303737666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666313636313038666333343930383131353032393036303430353136303030363034303531383038333033383138353838383866313933353035303530353031353830313536313036363635373364363030303830336533643630303066643562353035303536356236303630363030313630303038333831353236303230303139303831353236303230303136303030323038303534363030313831363030313136313536313031303030323033313636303032393030343830363031663031363032303830393130343032363032303031363034303531393038313031363034303532383039323931393038313831353236303230303138323830353436303031383136303031313631353631303130303032303331363630303239303034383031353631303731333537383036303166313036313036653835373631303130303830383335343034303238333532393136303230303139313631303731333536356238323031393139303630303035323630323036303030323039303562383135343831353239303630303130313930363032303031383038333131363130366636353738323930303336303166313638323031393135623530353035303530353039303530393139303530353635623630363036303030363030363630303735343831383035343630303138313630303131363135363130313030303230333136363030323930303438303630316630313630323038303931303430323630323030313630343035313930383130313630343035323830393239313930383138313532363032303031383238303534363030313831363030313136313536313031303030323033313636303032393030343830313536313037626435373830363031663130363130373932353736313031303038303833353430343032383335323931363032303031393136313037626435363562383230313931393036303030353236303230363030303230393035623831353438313532393036303031303139303630323030313830383331313631303761303537383239303033363031663136383230313931356235303530353035303530393135303931353039313530393039313536356235623638303536626337356532643633313030303030363030333534313031353631303766373537363030333630303038313534383039323931393036303031303139313930353035353530363130376364353635623536356236303032353438313536356236303430353138303830376636383635366336633666303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030383135323530363030353031393035303630343035313830393130333930323036303035383136303030313931363930353535303536356238313737666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666313636313038666338323930383131353032393036303430353136303030363034303531383038333033383138353838383866313933353035303530353031353830313536313038386235373364363030303830336533643630303066643562353035303530353635623630343035313830383037663638363536633663366630303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303038313532353036303035303139303530363034303531383039313033393061303766373436633666363733313030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303630343035313830383037663638363536633663366633313030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303038313532353036303036303139303530363034303531383039313033393061313766373436633666363733323030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303766373436633666363733313030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303630343035313830383037663638363536633663366630303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303038313532353036303035303139303530363034303531383039313033393061323766373436633666363733333030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303766373436633666363733323030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303766373436633666363733313030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303630343035313830383037663638363536633663366630303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303038313532353036303035303139303530363034303531383039313033393061333766373436633666363733333030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303830376637343663366636373332303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030376637343663366636373331303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030363034303531383038303766363836353663366336663030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303831353235303630303530313930353036303430353138303931303339306134353635623630303038303630303038333737666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666313637376666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666663136383135323630323030313930383135323630323030313630303032303534393035303931393035303536356236303030383136303034383139303535353036303034353439303530393139303530353635623630303033333930353036303032363030303831353438303932393139303630303130313931393035303535353036303032353436303030383038333737666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666313637376666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666663136383135323630323030313930383135323630323030313630303032303831393035353530383136303031363030303630303235343831353236303230303139303831353236303230303136303030323039303830353139303630323030313930363130626261393239313930363130626266353635623530353035303536356238323830353436303031383136303031313631353631303130303032303331363630303239303034393036303030353236303230363030303230393036303166303136303230393030343831303139323832363031663130363130633030353738303531363066663139313638333830303131373835353536313063326535363562383238303031363030313031383535353832313536313063326535373931383230313562383238313131313536313063326435373832353138323535393136303230303139313930363030313031393036313063313235363562356235303930353036313063336239313930363130633366353635623530393035363562363130633631393139303562383038323131313536313063356435373630303038313630303039303535353036303031303136313063343535363562353039303536356239303536303061313635363237613761373233303538323033333139653164333264663761643837366337616131666266636638323936363266393635613035366535323365346262396434353136366266643035653631303032391a041a02080122110a03313131120a68656c6c6f203131312122110a03323232120a68656c6c6f20323232212880ade2042a0fe5889be5bbba45564de59088e7baa630c0843d38016014";
        // Parsing the transaction Blob
        BIFTransactionParseBlobResponse transaction = sdk.getBIFTransactionService().parseBlob(transactionBlobResult);
        if(transaction.getErrorCode()==0){
            System.out.println("parseBlob: " + JsonUtils.toJSONString(transaction));
        }else {
            System.out.println(JsonUtils.toJSONString(transaction));
        }
    }
    /**
     * 根据hash获取bid标识
     */
    @Test
    public void getBidByHash(){
        BIFTransactionGetInfoRequest request = new BIFTransactionGetInfoRequest();
        request.setHash("d098413c2882ae8cf95e384d778635909effaeb3616ce03d741726b5bc0af00a");
        request.setDomainId(20);
        BIFTransactionGetBidResponse result = sdk.getBIFTransactionService().getBidByHash(request);
        if (result.getErrorCode() == 0) {
            System.out.println("bids: "+JsonUtils.toJSONString(result.getBids()));
        } else {
            System.out.println(JsonUtils.toJSONString(result));
        }
    }

    @Test
    public void batchGasSend() {
        // 初始化参数
        String senderAddress = "did:bid:ef7zyvBtyg22NC4qDHwehMJxeqw6Mmrh";
        String senderPrivateKey = "priSPKr2dgZTCNj1mGkDYyhyZbCQhEzjQm7aEAnfVaqGmXsW2x";
         senderAddress = "did:bid:efDhnL1BDthu7cbxnGMWvvuWPH9UYDfS";
         senderPrivateKey = "priSPKrmtaaVEhG4UuZzVLdDjae6dSVY4mg8pvC1XDt4kfmvvH";
         senderAddress = "did:bid:efnVUgqQFfYeu97ABf6sGm3WFtVXHZB2";
         senderPrivateKey = "priSPKkWVk418PKAS66q4bsiE2c4dKuSSafZvNWyGGp2sJVtXL";
        String destAddress1 = KeyPairEntity.getBidAndKeyPairBySM2().getEncAddress();
        String destAddress2 = KeyPairEntity.getBidAndKeyPairBySM2().getEncAddress();
        Long bifAmount1 = ToBaseUnit.ToUGas("1000");
        Long bifAmount2 = ToBaseUnit.ToUGas("1");

        List<BIFGasSendOperation> operations = new ArrayList<BIFGasSendOperation>();
        BIFGasSendOperation operation1 = new BIFGasSendOperation();
        operation1.setDestAddress("did:bid:efSTLEPkA6jPrnWpaqw4WmAQmaaS7YDu");
        operation1.setAmount(bifAmount1);

        BIFGasSendOperation operation2 = new BIFGasSendOperation();
        operation2.setDestAddress("did:bid:ef2AWam1Z94YrajNw63GLkLoKamGxqx5P");
        operation2.setAmount(bifAmount1);

        BIFGasSendOperation operation3 = new BIFGasSendOperation();
        operation3.setDestAddress("did:bid:efHwQ3m29yGYKZqMJwdJK5xEKvtCw4pv");
        operation3.setAmount(bifAmount1);

        BIFGasSendOperation operation4 = new BIFGasSendOperation();
        operation4.setDestAddress("did:bid:efzguRf84sNRYAn4QuPfcwVzeMb5P7nQ");
        operation4.setAmount(bifAmount1);

        BIFGasSendOperation operation5 = new BIFGasSendOperation();
        operation5.setDestAddress("did:bid:eftSPdAMDXoExnsAXPu9G6KpJLfc74D4");
        operation5.setAmount(bifAmount1);

        BIFGasSendOperation operation6 = new BIFGasSendOperation();
        operation6.setDestAddress("did:bid:efBYuREEjsHHaVQs778NE2YeNDC4Zav3");
        operation6.setAmount(bifAmount1);

        operations.add(operation1);
        operations.add(operation2);
        operations.add(operation3);
        operations.add(operation4);
        operations.add(operation5);
        operations.add(operation6);
        // 初始化请求参数
        BIFBatchGasSendRequest request = new BIFBatchGasSendRequest();
        request.setSenderAddress(senderAddress);
        request.setPrivateKey(senderPrivateKey);
        request.setOperations(operations);
        request.setRemarks(HexFormat.byteToHex("batch gas send".getBytes()));
        request.setGasPrice(10L);
        //request.setFeeLimit(500L);
        // 调用batchGasSend接口
        BIFTransactionGasSendResponse response = sdk.getBIFTransactionService().batchGasSend(request);
        if (response.getErrorCode() == 0) {
            BIFTransactionGasSendResult result = response.getResult();
            System.out.println(JsonUtils.toJSONString(result));
        } else {
            System.out.println(JsonUtils.toJSONString(response));
        }
        List<BIFGasSendOperation> operations1 = new ArrayList<BIFGasSendOperation>();
        BIFGasSendOperation operation = new BIFGasSendOperation();
        operation.setDestAddress("ssssssss");
        operation.setAmount(null);
        operations1.add(operation);
        request.setOperations(operations1);
        // 调用batchGasSend接口
         response = sdk.getBIFTransactionService().batchGasSend(request);
        if (response.getErrorCode() == 0) {
            BIFTransactionGasSendResult result = response.getResult();
            System.out.println(JsonUtils.toJSONString(result));
        } else {
            System.out.println(JsonUtils.toJSONString(response));
        }
    }
}

